let form=document.getElementById("treasury_form"),accounting_field=document.getElementById("accounting-field"),accounting_additional_div=document.getElementById("accounting-additional-div"),html_label_accounting_additional='<label for="addtional-field" class="form-label" id="additional-label">Sous compte</label>',html_select_accounting_additional=`<select class="form-select" name="accounting_additional" id="accounting-additional-field" required>
                                         <option value="" disabled selected>Entrez un sous compte</option>
                                    </select>`,accounting_adjunct_div=document.getElementById("accounting-adjunct-div"),html_label_accounting_adjunct='<label for="adjunct-field" class="form-label" id="adjunct-label">Annexe</label>',html_select_accounting_adjunct=`<select class="form-select" name="accounting_adjunct" id="accounting-adjunct-field" required>
                                         <option value="" disabled selected>Entrez un annexe </option>
                                    </select>`,accounting_additional_url=form.getAttribute("data-url-accounting-additional"),accounting_adjunct_url=form.getAttribute("data-url-adjunct"),fiscal_year=form.getAttribute("data-year");accounting_field.addEventListener("change",function(e){var e=e.detail.value,n=new XMLHttpRequest;n.onload=function(){var e=JSON.parse(this.responseText);if(0<e.length){accounting_additional_div.innerHTML="",accounting_adjunct_div.innerHTML="",accounting_additional_div.insertAdjacentHTML("afterbegin",html_label_accounting_additional),accounting_additional_div.insertAdjacentHTML("beforeend",html_select_accounting_additional);var n=document.getElementById("accounting-additional-field");const a=new Choices(n,{loadingText:"Chargement...",noResultsText:"Aucun résultat trouvé",searchFields:["label"],searchResultLimit:6});let t=[];Array.from(e).forEach((n,e)=>{void 0===a._store.state.choices.find(e=>e.value===n.id)&&t.push({value:n.id,label:n.account_name,selected:!1,disabled:!1})}),a.setChoices(t)}else accounting_additional_div.innerHTML="",accounting_adjunct_div.innerHTML=""},n.open("GET",accounting_additional_url+"?accounting_main_id="+e,!0),n.send()}),document.addEventListener("change",e=>{var n;"accounting-additional-field"===e.target.id&&(e=e.detail.value,(n=new XMLHttpRequest).onload=function(){var e=JSON.parse(this.responseText);if(0<e.length){accounting_adjunct_div.innerHTML="",accounting_adjunct_div.insertAdjacentHTML("afterbegin",html_label_accounting_adjunct),accounting_adjunct_div.insertAdjacentHTML("beforeend",html_select_accounting_adjunct);var n=document.getElementById("accounting-adjunct-field");const a=new Choices(n,{loadingText:"Chargement...",noResultsText:"Aucun résultat trouvé",searchFields:["label"],searchResultLimit:6});let t=[];Array.from(e).forEach((n,e)=>{void 0===a._store.state.choices.find(e=>e.value===n.id)&&t.push({value:n.id,label:n.adjunct_account_name,selected:!1,disabled:!1})}),a.setChoices(t)}else accounting_adjunct_div.innerHTML=""},n.open("GET",accounting_adjunct_url+"?accounting_additional_id="+e+"&fiscal_year="+fiscal_year,!0),n.send())});